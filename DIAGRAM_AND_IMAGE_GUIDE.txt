================================================================================
              COMPLETE DIAGRAM AND IMAGE GUIDE FOR DOCUMENTATION
                    What to Draw and How to Draw It
================================================================================

This guide shows you EXACTLY what to include in each diagram and screenshot.
Follow this to create all 25 figures for your documentation.

================================================================================
                    PART 1: DIAGRAMS TO CREATE (3 diagrams)
================================================================================

Use draw.io (https://app.diagrams.net/) - it's free and easy!

================================================================================
FIGURE 1: SYSTEM ARCHITECTURE DIAGRAM
================================================================================
WHERE TO INSERT: After Section 9.1 "System Architecture"

WHAT TO DRAW:
Create a 3-tier architecture diagram showing data flow

┌─────────────────────────────────────────────────────────────────┐
│                     PRESENTATION LAYER                          │
│  ┌───────────────────────────────────────────────────────┐     │
│  │              React Frontend (Port 3001)                │     │
│  │  • Login/Register Pages                                │     │
│  │  • Post Creation & Viewing                             │     │
│  │  • Admin Panel                                         │     │
│  │  • User Profiles                                       │     │
│  └───────────────────────────────────────────────────────┘     │
└─────────────────────────────────────────────────────────────────┘
                              ↓ ↑
                    HTTP Requests (Axios)
                    JWT Token in Headers
                              ↓ ↑
┌─────────────────────────────────────────────────────────────────┐
│                     APPLICATION LAYER                           │
│  ┌───────────────────────────────────────────────────────┐     │
│  │           Express.js Backend (Port 3000)               │     │
│  │                                                         │     │
│  │  Security Middleware:                                  │     │
│  │  • Authentication (JWT)                                │     │
│  │  • Authorization (RBAC)                                │     │
│  │  • Rate Limiting                                       │     │
│  │  • Input Validation                                    │     │
│  │  • CSRF Protection                                     │     │
│  │                                                         │     │
│  │  API Endpoints:                                        │     │
│  │  • /api/users (Auth)                                   │     │
│  │  • /api/posts (CRUD)                                   │     │
│  │  • /api/admin (Management)                             │     │
│  │  • /api/payments (Square)                              │     │
│  └───────────────────────────────────────────────────────┘     │
└─────────────────────────────────────────────────────────────────┘
                              ↓ ↑
                    Mongoose ODM Queries
                    JSON Documents
                              ↓ ↑
┌─────────────────────────────────────────────────────────────────┐
│                        DATA LAYER                               │
│  ┌───────────────────────────────────────────────────────┐     │
│  │                MongoDB Database                        │     │
│  │                                                         │     │
│  │  Collections:                                          │     │
│  │  • Users                                               │     │
│  │  • Posts                                               │     │
│  │  • Comments                                            │     │
│  │  • Categories                                          │     │
│  │  • AuditLogs                                           │     │
│  │  • Payments                                            │     │
│  └───────────────────────────────────────────────────────┘     │
└─────────────────────────────────────────────────────────────────┘

COLORS TO USE:
- Presentation Layer: Light Blue (#E3F2FD)
- Application Layer: Light Green (#E8F5E9)
- Data Layer: Light Orange (#FFF3E0)
- Arrows: Dark Gray (#424242)

HOW TO CREATE IN DRAW.IO:
1. Go to https://app.diagrams.net/
2. Create new diagram
3. Use "Rectangle" shapes for each layer
4. Use "Text" to add labels
5. Use "Arrow" connectors between layers
6. Add colors by right-clicking shape -> Edit Style
7. Export as PNG: File -> Export as -> PNG

================================================================================
FIGURE 2: DATABASE SCHEMA DIAGRAM
================================================================================
WHERE TO INSERT: After Section 8.3 "Database System"  

SIMPLIFIED VERSION - EASY TO UNDERSTAND!

WHAT TO DRAW:
Create 6 boxes (one for each collection) and connect them with arrows

STEP-BY-STEP INSTRUCTIONS FOR DRAW.IO:

1. Go to https://app.diagrams.net/
2. Create new diagram
3. Create 6 rectangles (one for each collection below)
4. Arrange them in 2 rows:
   - Top row: USERS, POSTS, COMMENTS
   - Bottom row: CATEGORIES, AUDITLOGS, PAYMENTS

5. For each rectangle, add this content:

┌─────────────────────────────┐
│         USERS               │  ← Collection name (bold, larger font)
├─────────────────────────────┤  ← Horizontal line separator
│ _id (Primary Key)           │
│ username                    │
│ email                       │
│ password (hashed)           │
│ role (User/Admin)           │
│ isBanned                    │
│ mfa_enabled                 │
│ failedLoginAttempts         │
│ lockUntil                   │
│ passwordHistory             │
│ createdAt                   │
└─────────────────────────────┘

┌─────────────────────────────┐
│         POSTS               │
├─────────────────────────────┤
│ _id (Primary Key)           │
│ title                       │
│ content                     │
│ author → USERS._id          │  ← Shows relationship
│ category → CATEGORIES._id   │  ← Shows relationship
│ type (text/blog/image)      │
│ likes                       │
│ images                      │
│ videoUrl                    │
│ createdAt                   │
└─────────────────────────────┘

┌─────────────────────────────┐
│       COMMENTS              │
├─────────────────────────────┤
│ _id (Primary Key)           │
│ content                     │
│ author → USERS._id          │  ← Shows relationship
│ post → POSTS._id            │  ← Shows relationship
│ createdAt                   │
└─────────────────────────────┘

┌─────────────────────────────┐
│      CATEGORIES             │
├─────────────────────────────┤
│ _id (Primary Key)           │
│ name                        │
│ slug                        │
│ description                 │
│ icon                        │
│ color                       │
│ postCount                   │
│ members                     │
└─────────────────────────────┘

┌─────────────────────────────┐
│       AUDITLOGS             │
├─────────────────────────────┤
│ _id (Primary Key)           │
│ userId → USERS._id          │  ← Shows relationship
│ username                    │
│ action                      │
│ actionType                  │
│ ipAddress                   │
│ userAgent                   │
│ metadata                    │
│ status                      │
│ timestamp                   │
└─────────────────────────────┘

┌─────────────────────────────┐
│       PAYMENTS              │
├─────────────────────────────┤
│ _id (Primary Key)           │
│ userId → USERS._id          │  ← Shows relationship
│ amount                      │
│ currency                    │
│ status                      │
│ squarePaymentId             │
│ createdAt                   │
└─────────────────────────────┘

6. ADD ARROWS TO SHOW RELATIONSHIPS:
   Draw arrows from one collection to another:
   
   USERS → POSTS (arrow labeled "creates")
   USERS → COMMENTS (arrow labeled "writes")
   USERS → AUDITLOGS (arrow labeled "generates")
   USERS → PAYMENTS (arrow labeled "makes")
   POSTS → COMMENTS (arrow labeled "has")
   CATEGORIES → POSTS (arrow labeled "contains")

7. ADD A LEGEND BOX at the bottom:
   ┌─────────────────────────────┐
   │         LEGEND              │
   ├─────────────────────────────┤
   │ → = Relationship            │
   │ _id = Unique identifier     │
   │ Each collection is a table  │
   └─────────────────────────────┘

COLORS TO USE:
- All collection boxes: Light Blue (#BBDEFB)
- Collection names: Bold, Dark Blue (#1565C0)
- Field text: Black
- Arrows: Blue (#1976D2)
- Legend box: Light Gray (#F5F5F5)

ALTERNATIVE - EVEN SIMPLER VERSION:
If the above is still confusing, just create a simple list diagram:

┌────────────────────────────────────────────────────────────┐
│                    DATABASE COLLECTIONS                    │
├────────────────────────────────────────────────────────────┤
│                                                            │
│  1. USERS - Stores user accounts and authentication       │
│     • username, email, password (hashed)                   │
│     • role, isBanned, mfa_enabled                          │
│     • failedLoginAttempts, lockUntil                       │
│                                                            │
│  2. POSTS - Stores user-created content                    │
│     • title, content, type                                 │
│     • author (links to USERS)                              │
│     • category (links to CATEGORIES)                       │
│     • likes, images, videoUrl                              │
│                                                            │
│  3. COMMENTS - Stores comments on posts                    │
│     • content                                              │
│     • author (links to USERS)                              │
│     • post (links to POSTS)                                │
│                                                            │
│  4. CATEGORIES - Stores gaming communities                 │
│     • name, slug, description                              │
│     • icon, color, postCount                               │
│                                                            │
│  5. AUDITLOGS - Tracks security events                     │
│     • userId (links to USERS)                              │
│     • action, actionType, status                           │
│     • ipAddress, userAgent, timestamp                      │
│                                                            │
│  6. PAYMENTS - Stores payment transactions                 │
│     • userId (links to USERS)                              │
│     • amount, currency, status                             │
│     • squarePaymentId                                      │
│                                                            │
└────────────────────────────────────────────────────────────┘

This simpler version is easier to create and still shows all the information!

WHICH VERSION TO USE:
- Use the BOXES version if you're comfortable with draw.io
- Use the SIMPLE LIST version if you want something quick and easy
- Both are acceptable for documentation!

================================================================================
FIGURE 3: AUTHENTICATION FLOW DIAGRAM
================================================================================
WHERE TO INSERT: After Section 9.4 "Session Handling"

WHAT TO DRAW:
Flowchart showing the complete login process with MFA

START
  ↓
┌─────────────────────┐
│ User enters email   │
│ and password        │
└─────────────────────┘
  ↓
┌─────────────────────┐
│ Frontend sends      │
│ POST /api/users/    │
│ login               │
└─────────────────────┘
  ↓
┌─────────────────────┐
│ Rate Limiter Check  │
│ (10 attempts/15min) │
└─────────────────────┘
  ↓
  ├─ Exceeded? ──→ [Return 429 Error] → END
  ↓ No
┌─────────────────────┐
│ Find user by email  │
│ in database         │
└─────────────────────┘
  ↓
  ├─ Not found? ──→ [Return 401 Error] → END
  ↓ Found
┌─────────────────────┐
│ Check if user is    │
│ banned              │
└─────────────────────┘
  ↓
  ├─ Banned? ──→ [Return 403 Error] → END
  ↓ Not banned
┌─────────────────────┐
│ Check if account    │
│ is locked           │
└─────────────────────┘
  ↓
  ├─ Locked? ──→ [Return 401 Error] → END
  ↓ Not locked
┌─────────────────────┐
│ Compare password    │
│ with bcrypt         │
└─────────────────────┘
  ↓
  ├─ Invalid? ──→ ┌──────────────────┐
  │              │ Increment failed  │
  │              │ attempts counter  │
  │              └──────────────────┘
  │                      ↓
  │              ┌──────────────────┐
  │              │ >= 5 attempts?   │
  │              └──────────────────┘
  │                      ↓
  │              ├─ Yes → [Lock account 30 min] → END
  │              ↓ No
  │              [Return 401 Error] → END
  ↓ Valid
┌─────────────────────┐
│ Reset failed        │
│ attempts to 0       │
└─────────────────────┘
  ↓
┌─────────────────────┐
│ Check if MFA        │
│ is enabled          │
└─────────────────────┘
  ↓
  ├─ MFA Enabled? ──→ ┌──────────────────┐
  │                   │ Generate 6-digit │
  │                   │ OTP              │
  │                   └──────────────────┘
  │                           ↓
  │                   ┌──────────────────┐
  │                   │ Send OTP via     │
  │                   │ email            │
  │                   └──────────────────┘
  │                           ↓
  │                   ┌──────────────────┐
  │                   │ Return requireMFA│
  │                   │ = true           │
  │                   └──────────────────┘
  │                           ↓
  │                   ┌──────────────────┐
  │                   │ User enters OTP  │
  │                   └──────────────────┘
  │                           ↓
  │                   ┌──────────────────┐
  │                   │ Verify OTP       │
  │                   └──────────────────┘
  │                           ↓
  │                   ├─ Invalid/Expired? → [Return 400 Error] → END
  │                   ↓ Valid
  ↓ MFA Disabled      ↓
  └──────────────────→┌──────────────────┐
                      │ Generate JWT     │
                      │ token            │
                      └──────────────────┘
                              ↓
                      ┌──────────────────┐
                      │ Set HTTP-only    │
                      │ cookie           │
                      └──────────────────┘
                              ↓
                      ┌──────────────────┐
                      │ Log audit event  │
                      └──────────────────┘
                              ↓
                      ┌──────────────────┐
                      │ Return success   │
                      │ with token       │
                      └──────────────────┘
                              ↓
                            END

COLORS TO USE:
- Process boxes: Light Blue (#BBDEFB)
- Decision diamonds: Light Yellow (#FFF9C4)
- Error boxes: Light Red (#FFCDD2)
- Success boxes: Light Green (#C8E6C9)
- Arrows: Black

SHAPES TO USE:
- Rectangle: Process steps
- Diamond: Decision points
- Rounded rectangle: Start/End
- Arrow: Flow direction

HOW TO CREATE IN DRAW.IO:
1. Use "Flowchart" shapes from left panel
2. Start with rounded rectangle for START
3. Use rectangles for processes
4. Use diamonds for decisions (Yes/No branches)
5. Connect with arrows
6. Add colors to different types of boxes
7. Export as PNG

================================================================================
                    PART 2: CODE SCREENSHOTS (15 screenshots)
================================================================================

All code screenshots come from DOCUMENTATION_CODE_EXAMPLES.js file!

HOW TO TAKE CODE SCREENSHOTS:
1. Open DOCUMENTATION_CODE_EXAMPLES.js in VS Code
2. Zoom to 120% (Ctrl + Mouse Wheel)
3. Use dark theme (File -> Preferences -> Color Theme -> Dark+)
4. Scroll to the Figure section you need
5. Screenshot the code INCLUDING:
   - File tab at top (shows filename)
   - Line numbers on left
   - The comment header (// FIGURE X:...)
   - The actual code with syntax highlighting
   - A few lines before and after for context
6. Press Windows + Shift + S to take screenshot
7. Save as "FigureX_Name.png"

FIGURE 4: Password Hashing Code
- Shows: bcrypt.hash() with 12 salt rounds
- Context: Inside registration endpoint

FIGURE 5: JWT Token Generation
- Shows: jwt.sign() with user data and expiry
- Context: Inside login endpoint after password verification

FIGURE 6: Authentication Middleware
- Shows: Complete auth.js middleware
- Includes: Token verification, user lookup, account checks

FIGURE 7: Role-Based Access Control
- Shows: Complete role.js middleware
- Includes: Role checking logic

FIGURE 8: Input Validation
- Shows: validateRegistration array
- Includes: Username, email, password validation rules

FIGURE 9: Rate Limiting Configuration
- Shows: loginLimiter setup
- Includes: Window time, max attempts, message

FIGURE 10: Account Lockout Implementation
- Shows: Failed login attempt tracking
- Includes: Lock account after 5 attempts

FIGURE 11: File Upload Security
- Shows: imageFilter and anyFileFilter functions
- Includes: File type validation, blocked executables

FIGURE 12: CSRF Protection
- Shows: CSRF middleware setup
- (If you don't have csrf.js, skip this)

FIGURE 13: Ban User Function
- Shows: Complete ban endpoint
- Includes: Admin check, ban reason, audit logging

FIGURE 14: Unban User Function
- Shows: Complete unban endpoint
- Includes: Unlock account, reset failed attempts

FIGURE 15: MFA Email OTP Verification
- Shows: OTP verification endpoint
- Includes: OTP check, expiry check, JWT generation

FIGURE 16: Audit Logging System
- Shows: logAudit function
- Includes: Action types, metadata, timestamp

FIGURE 17: Password Strength Validation
- Shows: isStrongPassword function
- Includes: Regex for 8+ chars, mixed case, numbers, symbols

FIGURE 18: React Login Component
- Shows: Login component JSX
- Includes: Form, CAPTCHA, error handling

================================================================================
                    PART 3: UI SCREENSHOTS (7 screenshots)
================================================================================

HOW TO TAKE UI SCREENSHOTS:
1. Start backend: cd backend, npm start
2. Start frontend: cd frontend, npm run dev
3. Open browser to http://localhost:3001
4. Make sure URL bar is visible in screenshot!
5. Press Windows + Shift + S to take screenshot
6. Capture full browser window
7. Save as "FigureX_Name.png"

================================================================================
FIGURE 19: LOGIN PAGE UI
================================================================================
WHERE TO INSERT: After Section 10.2 "Security Features Showcase"

WHAT TO SHOW:
- URL: http://localhost:3001/login
- Login form with:
  * Email/username input field
  * Password input field
  * CAPTCHA (if visible)
  * "Login" button
  * "Forgot Password?" link
  * "Register here" link
- Clean, professional design
- Blue and white color scheme

MAKE SURE VISIBLE:
✓ Browser URL bar showing localhost:3001/login
✓ All form fields
✓ Buttons and links
✓ No personal information

================================================================================
FIGURE 20: REGISTRATION PAGE UI
================================================================================
WHERE TO INSERT: After Section 10.2 "Security Features Showcase"

WHAT TO SHOW:
- URL: http://localhost:3001/register
- Registration form with:
  * Username input field
  * Email input field
  * Password input field (TYPE A PASSWORD!)
  * Password strength meter (showing strength)
  * Confirm password field
  * "Register" button
- Password strength indicator visible (Weak/Medium/Strong)

MAKE SURE VISIBLE:
✓ Browser URL bar
✓ Password strength meter with color
✓ All form fields filled (use test data)
✓ No real personal information

================================================================================
FIGURE 21: ADMIN PANEL - USER MANAGEMENT UI
================================================================================
WHERE TO INSERT: After Section 9.6 "Role-Based Access Control"

WHAT TO SHOW:
- URL: http://localhost:3001/admin
- Login as: imnumba1@gmail.com (admin account)
- Admin panel with:
  * "Users" tab selected
  * List of users showing:
    - Username
    - Email
    - Role (User/Admin)
    - Status (Active/Banned)
    - Ban/Unban buttons
  * Navigation tabs (Users, Posts, Categories, Audit Logs)

MAKE SURE VISIBLE:
✓ Browser URL bar
✓ Admin navigation
✓ User list with Ban/Unban buttons
✓ At least 3-4 users visible

================================================================================
FIGURE 22: BAN USER MODAL UI
================================================================================
WHERE TO INSERT: After Section 10.2 "Security Features Showcase"

WHAT TO SHOW:
- In admin panel, click "Ban User" button
- Modal/prompt showing:
  * "Ban User" title
  * Username being banned
  * "Reason" input field
  * "Confirm" button
  * "Cancel" button

MAKE SURE VISIBLE:
✓ Modal overlay
✓ Ban reason input field
✓ Confirm and Cancel buttons
✓ User being banned

================================================================================
FIGURE 23: BANNED USER LOGIN ERROR UI
================================================================================
WHERE TO INSERT: After Section 10.3 "Vulnerability Discovery"

WHAT TO SHOW:
1. First, ban a test user from admin panel
2. Logout
3. Try to login with that banned user's credentials
4. Screenshot the error message:
   * "Your account has been banned"
   * Ban reason displayed
   * Red error box/alert

MAKE SURE VISIBLE:
✓ Login page
✓ Error message clearly visible
✓ Red error styling
✓ Ban reason text

================================================================================
FIGURE 24: MFA EMAIL OTP SCREEN UI
================================================================================
WHERE TO INSERT: After Section 10.2 "Security Features Showcase"

WHAT TO SHOW:
1. Enable MFA for a user account
2. Logout
3. Login with that user
4. Screenshot the OTP verification screen:
   * "Enter OTP" or "Verify MFA" title
   * 6-digit OTP input field
   * "Verify" button
   * Message: "OTP sent to your email"

MAKE SURE VISIBLE:
✓ OTP input field
✓ Verify button
✓ Instructions/message
✓ Clean UI

================================================================================
FIGURE 25: AUDIT LOGS UI
================================================================================
WHERE TO INSERT: After Section 10.2 "Security Features Showcase"

WHAT TO SHOW:
- In admin panel, click "Audit Logs" tab
- List of security events showing:
  * Timestamp
  * Username
  * Action (USER_LOGIN, USER_BAN, PASSWORD_CHANGE, etc.)
  * IP Address
  * Status (SUCCESS/FAILED)
- At least 5-10 log entries visible

MAKE SURE VISIBLE:
✓ Audit Logs tab selected
✓ Table with columns (Time, User, Action, IP, Status)
✓ Multiple log entries
✓ Recent timestamps

================================================================================
                    SCREENSHOT QUALITY CHECKLIST
================================================================================

FOR CODE SCREENSHOTS:
[ ] VS Code file tab visible at top
[ ] Line numbers visible on left
[ ] Syntax highlighting (colors) visible
[ ] Dark theme used
[ ] Zoomed to 120% (readable)
[ ] 20-40 lines of code visible
[ ] Context included (before/after main code)
[ ] No personal information in code
[ ] Clear and not blurry

FOR UI SCREENSHOTS:
[ ] Browser URL bar visible
[ ] Full browser window captured
[ ] All UI elements visible and readable
[ ] No extra browser tabs (clean)
[ ] No personal information visible
[ ] Good resolution (not blurry)
[ ] Professional appearance

FOR DIAGRAMS:
[ ] High resolution (at least 1200px wide)
[ ] Clear labels and text
[ ] Professional colors
[ ] Exported as PNG (not JPG)
[ ] All elements visible
[ ] Not too complex or cluttered

================================================================================
                    FINAL TIPS
================================================================================

1. CONSISTENCY: Use the same theme/style for all screenshots
2. QUALITY: Make sure all images are clear and readable
3. SIZE: Keep images reasonable size (not too large for document)
4. CAPTIONS: Add caption below each: "Figure X: Description"
5. PLACEMENT: Insert in correct sections as specified
6. NUMBERING: Keep figures numbered 1-25 in order
7. REFERENCES: Refer to figures in your text ("as shown in Figure 4...")

================================================================================
